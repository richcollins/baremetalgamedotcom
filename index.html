<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns#">
  <head>
    <meta charset="UTF-8">
    <title>Bare Metal</title>
    <meta property="og:image" content="http://www.baremetalgame.com/baremetalgame.png" />
    <meta property="og:title" content="Bare Metal: Simple, Networked RTS with 80s Arcade Style" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="http://www.baremetalgame.com/" />
    <style>
        body {
          margin: 0;
          background: #000;
          font-family: MetalFont, sans-serif;
          font-weight:100; 
          font-size: .5rem;
          color: rgba(88, 144, 251, 1);
          text-transform: uppercase;
          text-shadow: 0px 0px 4px rgba(88, 144, 251, 1);
          line-height: 1.6rem;
       }

        @font-face {
            font-family: "MetalFont";
            src: url(PrintChar21.ttf) format("truetype");
        }

        #header { 
            background: rgba(0,0,0, 1.0);
            padding-top: 1.5rem;
            padding-left: 2rem;
            text-align: left;
            margin: 0rem;
        }

        a {
            text-decoration: none;
        }

        a:hover {
            color: rgba(180, 180, 0, 1);
            text-shadow: 0px 0px 6px rgba(180, 180, 0, 1);
       }
        
        video {
            display: block;
            position: absolute;
            top: 10px;
            left: 0px;
            right: 0px;
            bottom: 0px;
            z-index: -100;
            opacity: 0;   
            transition: 4.5s ease opacity;  
        }

        @media screen and (min-device-width: 1000px) { 
            #title { 
                font-size: .9rem;
           } 
           #subtitle { 
                font-size: .9rem;
                line-height: 1.3;
                padding-bottom: 18px;    
           } 
           .button { 
                font-size: .9rem;
                line-height: 1.3;
            } 
        }
        
        .character {
            transition: 1s ease-out all;  
        }

        @keyframes glowIn {
          0% {
               opacity: 1;
               color: rgba(255, 255, 255, 1);
               background-color: rgba(255, 255, 255, 1);
               text-shadow: 0px 0px 10px rgba(255, 255, 255, 1);
          }
          
          10% {
               opacity: 1;
               color: rgba(255, 255, 255, 1);
               background-color: rgba(0,0,0, 1);
               text-shadow: 0px 0px 10px rgba(255, 255, 255, 1);
          }

          100% {
              opacity: 1;
              color: rgba(88, 220, 88, 1);
              text-shadow: 0px 0px 2px rgba(88, 220, 88, 1);
          }           
        }
        
    </style>
  </head>
  <body>
          
    <div id="header" style="text-align: left;">
        <div id="title">Bare Metal</div>
        <div id="subtitle">networked tactical tug-of-war game</div>

        <a id="button1" class="button" href="BareMetalPC.zip">PC</a>&nbsp;&nbsp;
        <a id="button2" class="button" href="BareMetalMac.zip">Mac</a>&nbsp;
        <a id="button3" class="button" href="http://twitter.com/baremetalgame">twitter</a>&nbsp;&nbsp;
        <a id="button4" class="button" href="https://discordapp.com/invite/qAjsB8K">discuss</a>
        <br><br>
        <video id='video' width="100%" height="100%" autoplay  loop>
            <source src='./bare.mp4'>
        </video>
    </div> <!-- end header -->
    
    <script>
         
        var video = document.getElementById("video"); 
        var title = document.getElementById("title");
        var subtitle = document.getElementById("subtitle");
        var button1 = document.getElementById("button1");
        var button2 = document.getElementById("button2");
        var button3 = document.getElementById("button3");
        var button4 = document.getElementById("button4");
        
        if (/Android/i.test(navigator.userAgent)) {
            video.setAttribute('poster','poster.jpg');
        }

        window.onload = function(event) {
            //video_resize();
            video.pause()
            animate()
        }

        video.addEventListener('click',function(){
          video.play();
        }, false);
        
        window.onresize = function(event) {
            //video_resize();
        }
        
        /*
        function video_resize() {
            return; ///////////////////////////////////////
            console.log("resize")
            if (video == null) {
                return; 
            }
            
            video.style.position = "absolute";
            video.style.display = "block";
            video.style.left = 0;
            
            var vw = video.videoWidth;
            var vh = video.videoHeight;
            var w = window.innerWidth;
            var h = window.innerHeight;
            video.width = w;
            video.height = Math.floor(vh * (w / vw));
            
            var minh = 210
            var hOffset = ((h - video.height - minh)/2);
            if (hOffset < 0) { 
                hOffset = 0; 
            }
            
            if (hOffset < minh) { 
                hOffset = minh; 
            }
            video.style.top = hOffset + "px";

            //console.log("window " + w + "x" + h)
            //console.log("resized " + video.width + "x" + video.height)
        }
        */
        
        var globalDelay = 0
        
        function Element_typeIt() {
            this.style.opacity = 1
            
            var text = this.innerHTML
            var s = ""
            var localDelay = 0
            for (var i = 0; i < text.length; i++) {
               var c = text.substring(i, i+1)
               if (c == " ") {
                   c = "&nbsp;"
               }
               s += "<span class='character' style='color: transparent; opacity: 0; animation-fill-mode: forwards; animation-name: glowIn; animation-duration: 400ms; animation-delay: " + globalDelay + "ms;'>" + c + "</span>"
               var dt = 18
               globalDelay += dt;
               localDelay += dt
            }
                        
            this.innerHTML = s
            return this
        }
        
        function TypeIt(element) {
            element.typeIt = Element_typeIt
            element.typeIt() 
            return this          
        }

        function animate() {
            TypeIt(title)
            TypeIt(subtitle)
            TypeIt(button1)
            TypeIt(button2)
            TypeIt(button3)
            TypeIt(button4)
            setTimeout(function () { Video_show() }, globalDelay - 500);
        }

        function Video_show() {
            video.style.opacity = 1;
            video.play()
        }
        
    </script>    
  </body>
</html>
